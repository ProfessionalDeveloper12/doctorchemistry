<?php
/**  
 * @category    Ocodewire
 * @package     Ocodewire_OnePageCheckout
 * @author	Ocodewire
 */

?>
<div id="onepagecheckout-login-popup" style="display: none;">
    <div class="onepagecheckout-popup-wrapper">
        <div class="onepagecheckout-popup-contents">
            <div id="onepagecheckout-login-popup-contents-forgot" style="display: none;">
                <h1><?php echo $this->__('Forgotten your password?'); ?></h1>
                <p><?php echo $this->__('Enter your email below and we\'ll send you a new password by email.'); ?></p>

                <form id="onepagecheckout-forgot-form">

                    <div id="onepagecheckout-forgot-loading" style="display: none;" class="loading-ajax-login">&nbsp;</div>
                    <div id="onepagecheckout-forgot-error" class="onepagecheckout-error" style="display: none;">&nbsp;</div>
                    <div id="onepagecheckout-forgot-success" style="display: none;">
                        <?php echo $this->__('We have now sent you a new password to your email address. Click the link below to return to login.'); ?>
                    </div>

                    <table id="onepagecheckout-forgot-table">
                        <tr>
                            <td style="width: 25%;">
                                <label for="id_onepagecheckout_email"><?php echo $this->__('Email address'); ?></label>
                            </td>
                            <td style="width: 40%;">
                                <input type="text" class="input-text" name="onepagecheckout_email" id="id_onepagecheckout_email" />
                            </td>
                            <td style="width: 45%; text-align: center;">
                                <button id="onepagecheckout-forgot-button" type="button"><?php echo $this->__('Send password'); ?></button>
                            </td>
                        </tr>
                    </table>
                </form>
                <p style="margin-top: 10px;"><a href="javascript:void(0);" id="onepagecheckout-return-login-link"><?php echo $this->__('Return to login'); ?></a></p>
            </div>

            <div id="onepagecheckout-login-popup-contents-login">

                <h1><?php echo $this->__('Login'); ?></h1>

                <p><?php echo $this->__('Please login with your email address and password.'); ?></p>
                <form id="onepagecheckout-login-form">

                <div id="onepagecheckout-login-loading" style="display: none;" class="loading-ajax-login">&nbsp;</div>
                <div id="onepagecheckout-login-error" class="onepagecheckout-error" style="display: none;">&nbsp;</div>

                <table id="onepagecheckout-login-table">
                    <tr>
                        <td style="width: 30%;"><label for="id_onepagecheckout_username"><?php echo $this->__('Email address'); ?></label></td>
                        <td style="width: 51%;"><input tabindex="100" type="text" class="input-text" name="onepagecheckout_username" id="id_onepagecheckout_username" /></td>
                        <td rowspan="2"  style="width: 19%; vertical-align: middle;"><button tabindex="102" id="onepagecheckout-login-button" type="button"><?php echo $this->__('Login'); ?></button></td>
                    </tr>
                    <tr>
                        <td><label for="id_onepagecheckout_password"><?php echo $this->__('Password'); ?></label></td>
                        <td><input type="password" tabindex="101" name="onepagecheckout_password" class="input-text" id="id_onepagecheckout_password" /></td>
                    </tr>

                </table>
                </form>

                <p style="margin-top: 10px;"><a href="javascript:void(0);" id="onepagecheckout-forgot-password-link"><?php echo $this->__('Forgotten your password?'); ?></a></p>

            </div>

            <p class="close"><a href="javascript:void(0);"><?php echo $this->__('Close'); ?></a></p>
        </div>
    </div>
    <div class="onepagecheckout-popup-footer">&nbsp;</div>
</div>

<script>
var onepagecheckout_login_popup;
var login_popup;
Event.observe(window, 'load', function() {
    var options = {
        forgot_password_url: '<?php echo $this->getUrl('onepagecheckout/ajax/forgot_password', array('_secure'=>true)); ?>',
        login_url: '<?php echo $this->getUrl('onepagecheckout/ajax/login', array('_secure'=>true)); ?>',
        translations: {
            invalid_email: '<?php echo $this->__('Please enter a valid email address'); ?>',
            email_not_found: '<?php echo $this->__('Please enter a registered email address.'); ?>'
        }
    };
    onepagecheckout_login_popup = new OnePageCheckoutLoginPopup(options);
    login_popup = onepagecheckout_login_popup;
});
</script>
